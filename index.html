const symbolsConfig = [
            { symbol: "ğŸ’", value: 1, rarity: 40 },
            { symbol: "ğŸ‹", value: 2, rarity: 35 },
            { symbol: "ğŸ", value: 0, rarity: 75 },
            { symbol: "ğŸŠ", value: 3, rarity: 25 },
            { symbol: "ğŸ””", value: 5, rarity: 15 },
            { symbol: "â­", value: 8, rarity: 8 },
            { symbol: "ğŸ’", value: 12, rarity: 2 }
        ];

        const slots = [document.getElementById("slot1"), document.getElementById("slot2"), document.getElementById("slot3")];
        const resultEl = document.getElementById("result");
        const creditDisplay = document.getElementById("creditAmount");
        const popup = document.getElementById("creditPopup");
        const spinSound = document.getElementById("spinSound");
        const winSound = document.getElementById("winSound");
        const loseSound = document.getElementById("loseSound");
        const spinBtn = document.getElementById("spinButton");
        const adBtn = document.getElementById("adButton");
        const infoBtn = document.getElementById("infoButton");
        const symbolValuesDiv = document.getElementById("symbolValues");

        let credits = 10;
        const spinCost = 1;
        const baseCreditValue = 0.01358; // Nouvelle valeur du coin
        let currentCreditValue = baseCreditValue;
        let isSpinning = false;

        // CrÃ©er une liste pondÃ©rÃ©e de symboles basÃ©e sur la raretÃ©
        let weightedSymbols = [];
        symbolsConfig.forEach(item => {
            for (let i = 0; i < item.rarity; i++) {
                weightedSymbols.push(item.symbol);
            }
        });

        function updateCredits() {
            creditDisplay.textContent = `${credits} ğŸª™`;
            popup.textContent = `${credits} ğŸª™ = ${(credits * currentCreditValue).toFixed(4)} â‚¬`;
            spinBtn.disabled = credits < spinCost || isSpinning;
            adBtn.style.display = credits < spinCost ? 'block' : 'none';
        }

        function toggleValuePopup() {
            popup.style.display = popup.style.display === 'block' ? 'none' : 'block';
        }

        function toggleSymbolValues() {
            symbolValuesDiv.style.display = symbolValuesDiv.style.display === 'block' ? 'none' : 'block';
        }

        function spin() {
            if (credits < spinCost || isSpinning) return;

            isSpinning = true;
            credits -= spinCost;
            resultEl.textContent = "Tirage en cours... ğŸ²";
            spinSound.play();
            spinBtn.disabled = true; // DÃ©sactiver pendant le spin

            slots.forEach(slot => slot.classList.add("spinning"));

            setTimeout(() => {
                slots.forEach(slot => slot.classList.remove("spinning"));

                const result = [];
                let winAmount = 0;
                for (let i = 0; i < 3; i++) {
                    const randomSymbol = weightedSymbols[Math.floor(Math.random() * weightedSymbols.length)];
                    slots[i].textContent = randomSymbol; // Toujours afficher un emoji
                    result.push(randomSymbol);
                }

                if (result[0] === result[1] && result[1] === result[2] && result[0] !== "ğŸ") {
                    // Jackpot (pas de triple pomme)
                    const winningSymbolConfig = symbolsConfig.find(item => item.symbol === result[0]);
                    if (winningSymbolConfig) {
                        winAmount = winningSymbolConfig.value * 10;
                        resultEl.textContent = `ğŸ‰ TRIPLE ${result[0]} ! Tu gagnes +${winAmount} ğŸª™ !`;
                        winSound.play();
                    } else {
                        resultEl.textContent = `âŒ Rien gagnÃ©.`;
                        loseSound.play();
                    }
                } else if ((result[0] === result[1] || result[1] === result[2] || result[0] === result[2]) && !result.includes("ğŸ")) {
                    // Double (pas de double pomme)
                    const matchingSymbol = result[0] === result[1] ? result[0] : (result[1] === result[2] ? result[1] : (result[0] === result[2] ? result[0] : null));
                    if (matchingSymbol) {
                        const matchingSymbolConfig = symbolsConfig.find(item => item.symbol === matchingSymbol);
                        if (matchingSymbolConfig) {
                            winAmount = matchingSymbolConfig.value * 2;
                            resultEl.textContent = `âœ¨ DOUBLE ${matchingSymbol} ! Tu gagnes +${winAmount} ğŸª™`;
                            winSound.play();
                        } else {
                            resultEl.textContent = `âŒ Rien gagnÃ©.`;
                            loseSound.play();
                        }
                    } else {
                        resultEl.textContent = `âŒ Rien gagnÃ©.`;
                        loseSound.play();
                    }
                } else {
                    resultEl.textContent = `âŒ Rien gagnÃ©.`;
                    loseSound.play();
                }

                credits += winAmount;
                isSpinning = false;
                updateCredits(); // Mise Ã  jour de l'affichage
            }, 1500);
        }

        function watchAd() {
            // Redirection vers le site de publicitÃ©
            window.location.href = "http://eraz.ovh";
            // Pour une implÃ©mentation rÃ©elle, il faudrait gÃ©rer le retour et la rÃ©compense cÃ´tÃ© serveur.
        }

        // Remplir le popup des valeurs des symboles au chargement
        symbolValuesDiv.innerHTML = "<h3>Valeurs des Symboles et Gains:</h3>"; // RÃ©initialiser le contenu
        symbolsConfig.forEach(item => {
            const symbolInfo = document.createElement('p');
            const tripleWin = item.symbol === "ğŸ" ? "0" : `+${item.value * 10}`;
            const doubleWin = item.symbol === "ğŸ" ? "0" : `+${item.value * 2}`;
            symbolInfo.innerHTML = `<strong>${item.symbol}</strong> : ${item.value} ğŸª™<br>
                                   Triple: ${tripleWin} ğŸª™<br>
                                   Double: ${doubleWin} ğŸª™<br>
                                   (RaretÃ©: ${item.rarity})`;
            symbolValuesDiv.appendChild(symbolInfo);
        });
        // Ajouter une mention spÃ©ciale pour la pomme
        const appleInfo = document.createElement('p');
        appleInfo.innerHTML = `<strong>ğŸ Pomme</strong> : 0 ğŸª™<br>(RaretÃ©: ${symbolsConfig.find(s => s.symbol === "ğŸ").rarity})`;
        symbolValuesDiv.appendChild(appleInfo);

        // Initialisation de la valeur en euros
        popup.textContent = `${credits} ğŸª™ = ${(credits * baseCreditValue).toFixed(4)} â‚¬`;
        updateCredits(); // Initialiser l'affichage
    </script>
</body>
</html>
